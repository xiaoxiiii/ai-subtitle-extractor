# æ•…éšœæ’é™¤æŒ‡å— - AI è§†é¢‘å­—å¹•æå–å·¥å…·

## ğŸš¨ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1ï¼šæµè§ˆå™¨æ˜¾ç¤º"æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨"

**ç—‡çŠ¶ï¼š**
- Safari æˆ– Chrome æ˜¾ç¤º"Safariæµè§ˆå™¨æ— æ³•è¿æ¥æœåŠ¡å™¨"
- é¡µé¢ä¸€ç›´åŠ è½½ä½†æ— æ³•æ˜¾ç¤º

**æ ¹æœ¬åŸå› ï¼š**
1. å‰ç«¯æœåŠ¡å™¨ï¼ˆViteï¼‰è¿›ç¨‹è¢«ç³»ç»Ÿç»ˆæ­¢
2. ç«¯å£ 5173 æœªè¢«ç›‘å¬
3. æµè§ˆå™¨ç¼“å­˜é—®é¢˜

**è§£å†³æ­¥éª¤ï¼š**

```bash
# æ­¥éª¤ 1ï¼šé‡æ–°å¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨
/Users/xixi/subtitle-backend/start_all.sh

# æ­¥éª¤ 2ï¼šç¡®è®¤æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
lsof -ti:5173  # åº”è¯¥è¿”å›ä¸€ä¸ªè¿›ç¨‹ ID
lsof -ti:8000  # åº”è¯¥è¿”å›ä¸€ä¸ªè¿›ç¨‹ ID

# æ­¥éª¤ 3ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
# http://localhost:5173/

# æ­¥éª¤ 4ï¼šå¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œæ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶å¼ºåˆ¶åˆ·æ–°
# Chrome/Safari: Command + Shift + R
```

---

### é—®é¢˜ 2ï¼šæç¤º"è¯·ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ"

**ç—‡çŠ¶ï¼š**
- å‰ç«¯å¯ä»¥æ‰“å¼€
- ç‚¹å‡»"å¼€å§‹æå–å­—å¹•"åæç¤ºç½‘ç»œé”™è¯¯
- æ§åˆ¶å°æ˜¾ç¤º "Failed to fetch"

**æ ¹æœ¬åŸå› ï¼š**
1. åç«¯æœåŠ¡å™¨æœªè¿è¡Œæˆ–å´©æºƒ
2. ç«¯å£ 8000 è¢«å ç”¨
3. CORS é…ç½®é—®é¢˜

**è§£å†³æ­¥éª¤ï¼š**

```bash
# æ­¥éª¤ 1ï¼šæ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
lsof -ti:8000

# æ­¥éª¤ 2ï¼šå¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œé‡å¯æœåŠ¡å™¨
/Users/xixi/subtitle-backend/start_all.sh

# æ­¥éª¤ 3ï¼šæµ‹è¯•åç«¯ API
curl -X POST http://localhost:8000/api/extract \
  -H "Content-Type: application/json" \
  -d '{"url":"test"}'

# åº”è¯¥è¿”å› JSON é”™è¯¯ï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼Œè¯´æ˜åç«¯åœ¨å·¥ä½œï¼‰

# æ­¥éª¤ 4ï¼šè®¿é—®æµ‹è¯•é¡µé¢
# http://localhost:5173/test.html
# ç‚¹å‡»"æµ‹è¯•åç«¯è¿æ¥"æŒ‰é’®
```

---

### é—®é¢˜ 3ï¼šåç«¯æ˜¾ç¤º "Error code: 501"

**ç—‡çŠ¶ï¼š**
- ç›´æ¥è®¿é—® http://localhost:8000 æ˜¾ç¤ºé”™è¯¯
- é”™è¯¯ä¿¡æ¯ï¼šUnsupported method ('GET')

**è¿™ä¸æ˜¯é—®é¢˜ï¼**
- åç«¯æœåŠ¡å™¨åªæ¥å— POST è¯·æ±‚åˆ° /api/extract
- ç”¨æµè§ˆå™¨ç›´æ¥è®¿é—®ä¼šæ˜¾ç¤ºæ­¤é”™è¯¯ï¼Œè¿™æ˜¯**æ­£å¸¸è¡Œä¸º**
- åç«¯ä»ç„¶åœ¨æ­£å¸¸å·¥ä½œ

**æ— éœ€ä»»ä½•æ“ä½œ**

---

### é—®é¢˜ 4ï¼šæœåŠ¡å™¨åå¤æ–­å¼€è¿æ¥

**ç—‡çŠ¶ï¼š**
- å¯åŠ¨æœåŠ¡å™¨åå·¥ä½œä¸€æ®µæ—¶é—´åˆæ–­å¼€
- éœ€è¦åå¤é‡å¯æœåŠ¡å™¨

**æ ¹æœ¬åŸå› ï¼š**
1. åå°è¿›ç¨‹æ²¡æœ‰ç”¨ `nohup` ä¿æŠ¤
2. macOS ç³»ç»Ÿåœ¨å†…å­˜ç´§å¼ æ—¶ç»ˆæ­¢åå°è¿›ç¨‹
3. Terminal å…³é—­å¯¼è‡´è¿›ç¨‹è¢«æ€æ­»

**æ°¸ä¹…è§£å†³æ–¹æ¡ˆï¼š**

**å§‹ç»ˆä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š**
```bash
/Users/xixi/subtitle-backend/start_all.sh
```

**ä¸è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆä¸ç¨³å®šï¼‰ï¼š**
```bash
# âŒ é”™è¯¯æ–¹å¼
cd /Users/xixi/ai-video-subtitle-extractor && npm run dev &
python3 server.py &
```

**å¯åŠ¨è„šæœ¬çš„ä¼˜åŠ¿ï¼š**
- ä½¿ç”¨ `nohup` ä¿æŠ¤è¿›ç¨‹ä¸è¢«ç»ˆæ­¢
- è‡ªåŠ¨æ¸…ç†ç«¯å£å†²çª
- è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶æ–¹ä¾¿è°ƒè¯•
- éªŒè¯æœåŠ¡å™¨æˆåŠŸå¯åŠ¨

---

### é—®é¢˜ 5ï¼šæå–å­—å¹•å¤±è´¥ï¼Œæ˜¾ç¤º"æå–å¤±è´¥"

**ç—‡çŠ¶ï¼š**
- ç‚¹å‡»"å¼€å§‹æå–å­—å¹•"åç­‰å¾…ä¸€æ®µæ—¶é—´
- æ˜¾ç¤º"æå–å¤±è´¥"æˆ–é”™è¯¯æ¶ˆæ¯

**å¯èƒ½åŸå› ï¼š**

**åŸå›  Aï¼šæ— æ•ˆçš„è§†é¢‘ URL**
```bash
# è§£å†³ï¼šç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Bilibili URL æ ¼å¼
# æ­£ç¡®æ ¼å¼ï¼šhttps://www.bilibili.com/video/BV1xx411c7mD
```

**åŸå›  Bï¼šè§†é¢‘ä¸‹è½½å¤±è´¥**
```bash
# æ£€æŸ¥åç«¯æ—¥å¿—
tail -f /Users/xixi/subtitle-backend/backend.log

# å¯èƒ½çœ‹åˆ° yt-dlp é”™è¯¯
# è§£å†³ï¼šæ›´æ–° yt-dlp
pip3 install --upgrade yt-dlp
```

**åŸå›  Cï¼šWhisper æ¨¡å‹æœªä¸‹è½½**
```bash
# Whisper é¦–æ¬¡è¿è¡Œä¼šä¸‹è½½æ¨¡å‹ï¼ˆçº¦ 461MBï¼‰
# å¦‚æœç½‘ç»œæ…¢ï¼Œå¯èƒ½è¶…æ—¶

# æ£€æŸ¥æ¨¡å‹æ˜¯å¦å­˜åœ¨
ls -lh ~/.cache/whisper/

# åº”è¯¥çœ‹åˆ° small.pt (çº¦ 461MB)
```

**åŸå›  Dï¼šè¶…æ—¶**
```bash
# è§†é¢‘å¤ªé•¿ï¼ˆ>30åˆ†é’Ÿï¼‰å¯èƒ½è¶…æ—¶
# å½“å‰è¶…æ—¶è®¾ç½®ï¼š10åˆ†é’Ÿ

# å¦‚éœ€å¤„ç†æ›´é•¿è§†é¢‘ï¼Œä¿®æ”¹ server.py çš„ timeout å€¼
```

---

## ğŸ”§ è¯Šæ–­å·¥å…·

### 1. æµ‹è¯•é¡µé¢
è®¿é—®ï¼šhttp://localhost:5173/test.html

åŠŸèƒ½ï¼š
- æµ‹è¯•åç«¯è¿æ¥
- æµ‹è¯•å­—å¹•æå– API
- æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

### 2. æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
```bash
# æ£€æŸ¥å‰ç«¯
lsof -ti:5173 && echo "âœ… å‰ç«¯è¿è¡Œä¸­" || echo "âŒ å‰ç«¯æœªè¿è¡Œ"

# æ£€æŸ¥åç«¯
lsof -ti:8000 && echo "âœ… åç«¯è¿è¡Œä¸­" || echo "âŒ åç«¯æœªè¿è¡Œ"

# æŸ¥çœ‹æ‰€æœ‰ç›¸å…³è¿›ç¨‹
ps aux | grep -E "(vite|python.*server)" | grep -v grep
```

### 3. æŸ¥çœ‹æ—¥å¿—
```bash
# åç«¯æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
tail -f /Users/xixi/subtitle-backend/backend.log

# å‰ç«¯æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
tail -f /Users/xixi/ai-video-subtitle-extractor/frontend.log

# æŸ¥çœ‹æœ€è¿‘ 50 è¡Œ
tail -50 /Users/xixi/subtitle-backend/backend.log
```

### 4. æ‰‹åŠ¨æµ‹è¯•åç«¯ API
```bash
# æµ‹è¯•åç«¯å“åº”
curl -X POST http://localhost:8000/api/extract \
  -H "Content-Type: application/json" \
  -d '{"url":"https://www.bilibili.com/video/BV1xx411c7mD"}' \
  --max-time 300

# åº”è¯¥è¿”å› JSON æ•°æ®ï¼ˆå¯èƒ½éœ€è¦ç­‰å¾… 3-8 åˆ†é’Ÿï¼‰
```

---

## ğŸ“‹ å®Œæ•´é‡å¯æµç¨‹

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤å®Œå…¨é‡å¯ï¼š

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡å™¨
/Users/xixi/subtitle-backend/stop_all.sh

# 2. ç­‰å¾… 2 ç§’
sleep 2

# 3. ç¡®è®¤æ‰€æœ‰è¿›ç¨‹å·²åœæ­¢
lsof -ti:5173 -ti:8000
# åº”è¯¥æ²¡æœ‰è¾“å‡º

# 4. å¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨
/Users/xixi/subtitle-backend/start_all.sh

# 5. ç­‰å¾…å¯åŠ¨å®Œæˆï¼ˆçº¦ 5-10 ç§’ï¼‰

# 6. åœ¨æµè§ˆå™¨æ‰“å¼€
# http://localhost:5173/

# 7. æµ‹è¯•è¿æ¥
# http://localhost:5173/test.html
```

---

## ğŸ¯ é¢„é˜²æªæ–½

### 1. æ¯æ¬¡ä½¿ç”¨å‰å…ˆè¿è¡Œå¯åŠ¨è„šæœ¬
```bash
/Users/xixi/subtitle-backend/start_all.sh
```

### 2. ä½¿ç”¨å®Œæ¯•ååœæ­¢æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
```bash
/Users/xixi/subtitle-backend/stop_all.sh
```

### 3. å®šæœŸæ¸…ç†ç£ç›˜ç©ºé—´
- ä¿æŒè‡³å°‘ 10GB å¯ç”¨ç©ºé—´
- Whisper æ¨¡å‹å ç”¨ ~461MB
- ä¸´æ—¶è§†é¢‘æ–‡ä»¶ä¼šè‡ªåŠ¨æ¸…ç†

### 4. ä¸è¦ç›´æ¥ç”¨æµè§ˆå™¨è®¿é—®åç«¯
- âŒ ä¸è¦è®¿é—®ï¼šhttp://localhost:8000
- âœ… æ­£ç¡®è®¿é—®ï¼šhttp://localhost:5173/

### 5. ä¿æŒ Terminal çª—å£æ‰“å¼€ï¼ˆå¯é€‰ï¼‰
- è™½ç„¶ç”¨äº† nohupï¼Œä½†ä¿æŒ Terminal æ‰“å¼€æ›´ç¨³å®š
- æˆ–è€…åœ¨åå°è¿è¡Œåå¯ä»¥å…³é—­ Terminal

---

## ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¤„ç†æ—¶é—´
- çŸ­è§†é¢‘ï¼ˆ<5åˆ†é’Ÿï¼‰ï¼šçº¦ 2-3 åˆ†é’Ÿ
- ä¸­ç­‰è§†é¢‘ï¼ˆ5-15åˆ†é’Ÿï¼‰ï¼šçº¦ 3-8 åˆ†é’Ÿ
- é•¿è§†é¢‘ï¼ˆ>15åˆ†é’Ÿï¼‰ï¼šå¯èƒ½è¶…è¿‡ 10 åˆ†é’Ÿ

### 2. å‡†ç¡®åº¦
- å½“å‰ä½¿ç”¨ Whisper **small** æ¨¡å‹
- å‡†ç¡®åº¦ï¼šä¸­æ–‡çº¦ 85-90%
- å¦‚éœ€æ›´é«˜å‡†ç¡®åº¦ï¼Œå¯å‡çº§åˆ° medium æˆ– large æ¨¡å‹ï¼ˆéœ€è¦æ›´å¤šæ—¶é—´å’Œå†…å­˜ï¼‰

### 3. å†…å­˜ä½¿ç”¨
- å‰ç«¯ï¼š~50-100MB
- åç«¯ï¼š~200-500MB
- Whisper å¤„ç†æ—¶ï¼š~1-2GB

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

### å¯åŠ¨æœåŠ¡å™¨
```bash
/Users/xixi/subtitle-backend/start_all.sh
```

### åœæ­¢æœåŠ¡å™¨
```bash
/Users/xixi/subtitle-backend/stop_all.sh
```

### è®¿é—®åº”ç”¨
- ä¸»é¡µé¢ï¼šhttp://localhost:5173/
- æµ‹è¯•é¡µé¢ï¼šhttp://localhost:5173/test.html

### æ£€æŸ¥çŠ¶æ€
```bash
lsof -ti:5173 && lsof -ti:8000 && echo "âœ… æ‰€æœ‰æœåŠ¡å™¨è¿è¡Œä¸­"
```

### æŸ¥çœ‹æ—¥å¿—
```bash
tail -f /Users/xixi/subtitle-backend/backend.log
```
